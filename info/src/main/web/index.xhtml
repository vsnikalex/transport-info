<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:composite="http://xmlns.jcp.org/jsf/composite"
        template="/WEB-INF/templates/default.xhtml">
   <ui:define name="drivers">
      <script type="text/javascript" src="resources/js/sse.js"></script>
      <script>
         EventSource = SSE;

         var source = new SSE("http://localhost:8080/info/rest/cdievents");
         source.addEventListener('message from cdi', function(e) {
            // Assuming we receive JSON-encoded data payloads:
            var payload = JSON.parse(e.data);
            console.log(payload);
         });

         source.stream();
      </script>
      <div class="tc-note tc-note-info">
         <table class="table">
            <thead>
            <tr>
               <th>Drivers</th>
               <th><span class="sr-only">Preis Spalte</span></th>
            </tr>
            </thead>
            <tbody>
            <tr>
               <td>Available</td>
               <td class="numeric">23</td>
            </tr>
            <tr>
               <td>Driving</td>
               <td class="numeric">19</td>
            </tr>
            <tr>
               <td>Other work</td>
               <td class="numeric">10</td>
            </tr>
            </tbody>
            <tfoot>
            <tr>
               <td colspan="4" class="numeric text-brand text-semibold">
                  Total: 52
               </td>
            </tr>
            </tfoot>
         </table>
      </div>
   </ui:define>
   <ui:define name="trucks">
      <div class="tc-note tc-note-info">
         <table class="table">
            <thead>
            <tr>
               <th>Trucks</th>
               <th><span class="sr-only">Preis Spalte</span></th>
            </tr>
            </thead>
            <tbody>
            <tr>
               <td>Available</td>
               <td class="numeric">23</td>
            </tr>
            <tr>
               <td>In use</td>
               <td class="numeric">19</td>
            </tr>
            <tr>
               <td>Defective</td>
               <td class="numeric">3</td>
            </tr>
            </tbody>
            <tfoot>
            <tr>
               <td colspan="4" class="numeric text-brand text-semibold">
                  Total: 45
               </td>
            </tr>
            </tfoot>
         </table>
      </div>
   </ui:define>
</ui:composition>
